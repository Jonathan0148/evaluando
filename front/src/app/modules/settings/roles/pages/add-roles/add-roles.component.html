<ng-container form>
  <form [formGroup]="form">
    <div class="formgrid grid mb-5">
      <div class="field col-12 md:col-6">
        <label for="name">Nombre</label>
        <input [readOnly]="isDetail" type="text" [(ngModel)]="rol.name" formControlName="name" pInputText id="name"
          required maxlength="50" />
        <small class="ng-dirty p-error ng-invalid" *ngIf="submitted && !rol.name">Nombre es obligatorio.</small>
      </div>
      <div class="field col-12 md:col-6">
        <label for="description">Descripci贸n</label>
        <input [readOnly]="isDetail" type="text" [(ngModel)]="rol.description" formControlName="description" pInputText
          id="description" required maxlength="255" />
        <small class="ng-dirty p-error ng-invalid" *ngIf="submitted && !rol.description">Descripci贸n es
          obligatoria.</small>
      </div>
    </div>
    <div class="row"></div>
    <div class="formgrid grid mb-5">
      <div class="col-9 mt-3">
        <b><span>M贸dulos y permisos</span></b>
      </div>
      <div class="col-3">
        <button pButton pRipple label="Agregar" icon="pi pi-plus" class="p-button-secondary" [disabled]="isDetail"
          (click)="addRolesModules(true)"></button>
      </div>
    </div>
    <ng-container formArrayName="rolesModules">
      <ng-container *ngFor="let rolesModulesForm of rolesModules.controls; let i = index">
        <ng-container [formGroup]="rolesModulesForm">
          <div class="formgrid grid mb-2">
            <div class="col-5">
              <div class="form-group">
                <p-dropdown [readonly]="isDetail" (onChange)="validateExist($event.value, i)" [filter]="true"
                  inputId="modules_id" required optionLabel="name" formControlName="modules_id" optionValue="id"
                  [options]="modules" placeholder="Seleccione el m贸dulo" appendTo="body"></p-dropdown>
              </div>
            </div>
            <div class="col-6">
              <p-selectButton [options]="getPaymentOptions(i)" formControlName="selectedValue" [multiple]="true"
                optionLabel="name" optionDisabled="constant">
              </p-selectButton>
            </div>
            <div class="col-1">
              <button [disabled]="isDetail" pButton pRipple icon="pi pi-trash" class="p-button-rounded p-button-danger"
                (click)="deleteRoleModule(i)"></button>
            </div>
          </div>
        </ng-container>
      </ng-container>
    </ng-container>
  </form>
</ng-container>